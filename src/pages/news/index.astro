---
import Layout from '../../layouts/Layout.astro';
import Header from '@components/layout/Header.astro';
import Footer from '@components/layout/Footer.astro';
import { getCollection } from 'astro:content';
import '../../styles/global.css';

const news = (await getCollection('news'))
  .sort((a, b) => new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime());
---

<Layout>
  <Header />
  <main class="pt-24 pb-16 px-5 max-w-6xl mx-auto">
    <div class="mb-8">
      <h1 class="text-3xl md:text-4xl font-bold mb-3 bg-gradient-to-r from-blue-400 to-purple-600 bg-clip-text text-transparent">
        News
      </h1>
      <p class="text-gray-400 max-w-2xl">Latest updates from the CS Department.</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {news.map((item) => (
        <a href={`/news/${item.slug}`}
           class="block bg-gray-900/50 border border-gray-800 rounded-xl p-5 hover:border-blue-500/50 transition-all">
          <div class="text-xs text-gray-500">{new Date(item.data.publishDate).toLocaleDateString()}</div>
          <h2 class="text-lg font-semibold text-white mt-1">{item.data.title}</h2>
          {item.data.description && (
            <p class="text-sm text-gray-400 mt-2">{item.data.description}</p>
          )}
          {item.data.category && (
            <span class="inline-block mt-3 text-xs px-2 py-1 rounded bg-blue-500/15 text-blue-300 border border-blue-500/30">{item.data.category}</span>
          )}
        </a>
      ))}
    </div>

    {news.length === 0 && (
      <div class="text-center text-gray-400">No news yet.</div>
    )}
  </main>
  <Footer />
</Layout>
