---
import Layout from '../layouts/Layout.astro';
import RegistrationForm from '../components/RegistrationForm.astro';
---

<Layout title="Form Test - CS Department">
  <main
    class="min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 py-16 px-4"
  >
    <div class="max-w-4xl mx-auto">
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">
          Form <span
            class="bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent"
            >Test</span
          >
        </h1>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          Test the registration form functionality
        </p>

        <!-- Debug Info -->
        <div class="mt-8 p-4 bg-gray-800/50 rounded-lg text-left">
          <h3 class="text-lg font-semibold text-white mb-2">
            Debug Information:
          </h3>
          <p class="text-gray-300 text-sm" id="debug-info">
            Loading debug info...
          </p>
        </div>
      </div>

      <div class="grid lg:grid-cols-1 gap-12 items-start">
        <RegistrationForm
          eventTitle="Test Event Registration"
          eventId="test-event-2024"
          gradientColors={{
            from: 'from-green-500',
            to: 'to-blue-600',
          }}
          accentColor="green"
        />
      </div>
    </div>
  </main>
</Layout>

<script>
  // Debug information
  document.addEventListener('DOMContentLoaded', () => {
    const debugInfo = document.getElementById('debug-info');
    const info = [
      `Location: ${window.location.href}`,
      `Hostname: ${window.location.hostname}`,
      `Protocol: ${window.location.protocol}`,
      `User Agent: ${navigator.userAgent.substring(0, 50)}...`,
      `Form Detection: ${document.querySelector('form[name="event-registration"]') ? 'Found' : 'Not Found'}`,
      `Netlify Detected: ${document.querySelector('form[data-netlify="true"]') ? 'Yes' : 'No'}`,
    ];

    if (debugInfo) {
      debugInfo.innerHTML = info.join('<br>');
    }
  });
</script>
