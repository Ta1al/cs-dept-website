---
// HeaderController Island - Handles header background changes on scroll
---

<script>
  class HeaderController {
    private throttleTimer: number | null = null;

    constructor() {
      this.init();
    }

    init() {
      window.addEventListener('scroll', this.throttledHandleScroll.bind(this), {
        passive: true,
      });
    }

    throttledHandleScroll() {
      if (this.throttleTimer !== null) return;

      this.throttleTimer = window.requestAnimationFrame(() => {
        this.handleScroll();
        this.throttleTimer = null;
      });
    }

    handleScroll() {
      const header = document.querySelector('header');
      if (!header) return;

      if (window.scrollY > 100) {
        header.classList.add('bg-gray-900/95', 'backdrop-blur-md');
        header.style.transition = 'all 0.3s ease';
      } else {
        header.classList.remove('bg-gray-900/95', 'backdrop-blur-md');
      }
    }
  }

  // Initialize when DOM is loaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => new HeaderController());
  } else {
    new HeaderController();
  }
</script>
